<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Prueba UI</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin: 10px 0; }
        button { background: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer; }
        button:hover { background: #45a049; }
        input[type="text"] { width: 100%; padding: 10px; box-sizing: border-box; }
    </style>
</head>
<body>
    <h1>Formulario de Prueba</h1>
    <form id="miFormulario">
        <div class="form-group">
            <label for="nombre">Tu nombre:</label>
            <input type="text" id="nombre" required>
        </div>
        
        <div class="form-group">
            <h3>Selecciona una opción (puedes ver el orden en que eliges):</h3>
            <label><input type="radio" name="opcion" value="A" id="opA"> Opción A</label>
            <label><input type="radio" name="opcion" value="B" id="opB"> Opción B</label>
            <label><input type="radio" name="opcion" value="C" id="opC"> Opción C</label>
            <label><input type="radio" name="opcion" value="D" id="opD"> Opción D</label>
        </div>
        
        <button type="submit">Enviar</button>
    </form>

    <script>
        // Rastreo del orden de selecciones
        let ordenSelecciones = []; // Array para guardar el orden

        // Event listeners para rastrear clics en las opciones
        document.querySelectorAll('input[name="opcion"]').forEach((radio) => {
            radio.addEventListener('change', function() {
                const ahora = new Date().toISOString(); // Timestamp
                ordenSelecciones.push({
                    opcion: this.value,
                    timestamp: ahora,
                    posicion: ordenSelecciones.length + 1
                });
                console.log('Orden actual:', ordenSelecciones); // Para debug en consola
            });
        });

        // Al enviar el formulario
        document.getElementById('miFormulario').addEventListener('submit', function(e) {
            e.preventDefault(); // Evita recarga de página
            
            const nombre = document.getElementById('nombre').value;
            const opcionSeleccionada = document.querySelector('input[name="opcion"]:checked')?.value || 'Ninguna';
            
            // Datos a enviar: nombre, opción final, y el orden completo
            const datos = {
                nombre: nombre,
                opcionFinal: opcionSeleccionada,
                ordenSelecciones: ordenSelecciones // Incluye secuencia con timestamps
            };
            
            // Envía a Google Sheets vía POST
            fetch('https://script.google.com/macros/s/AKfycbypVUTuXA3B1U8cviqmgv5aWgsTUEo7ZjVk7MY5AngNu8oql63GJzo0PKi-_7IdPSfjhA/exec', {
                method: 'POST',
                mode: 'no-cors', // Para simplicidad, pero usa 'cors' si configuras
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(datos)
            })
            .then(() => {
                alert('¡Datos guardados en Sheets! Orden de selecciones: ' + JSON.stringify(ordenSelecciones));
                this.reset(); // Limpia el formulario
                ordenSelecciones = []; // Reinicia rastreo
            })
            .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>